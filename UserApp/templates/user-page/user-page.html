{% extends 'header/header.html' %}
{% load static %}

{% block title %}
    User page
{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{% static 'user.css' %}">
    <script src="{% static '/js/item_sellform.js' %}"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
{% endblock %}

{% block body %}
    <div class="MainBlock">
            <div class="profile-info">
                <div class="avatar">
                    <img class="avatar-image" height="200px" width="200px" src="{{ object.image.url }}">
                </div>
                <div>
                    <h6 class="profile-info-h6">
                        {{ object.username }}
                    </h6>
                    <h6 class="profile-info-stats"> STATS WILL BE HERE </h6>
                </div>
                <div>
                    {% if user == object and user.is_authenticated %}
                        <button type="button" class="btn btn-warning">✏</button>
                        <a class="btn btn-danger" href="{% url 'logout' %}">❌</a>
                    {% endif %}
                </div>
            </div>
        <div class="inventory">
            <div class="inventory-items">
                {% for line in inventory %}
                    <div class="line">
                    {% for obj in line %}

                    <div class="inventory-item-place">

                        <img src="{{ obj.item.image.url }}" class="inventory-item-image">

                        <div class="inventory-item-name">
                            {{ obj.item.name }}
                            <p></p>
                        {% if user == object and user.is_authenticated %}
                            <input type="button" id="hider{{ obj.id }}" class="btn btn-success" value="SELL" />
                        {% endif %}
                        </div>

                    </div>
                    {% endfor %}
                    </div>
                {% endfor %}
            <div>
                {% for id in ids %}
                     <div id="popup{{ id }}" class="popup" hidden>
                                <div class="inner__block">
                                    <input type="button" id="closer{{ id }}" class="btn btn-danger" value="CLOSE"/>

                                    <form action="/sellitem/{{ id }}" method="POST">
                                        {% csrf_token %}
                                        {{ form.price }}
                                        {{ form.interface_id }}
                                        <input type="submit" id="submitsell" value="Submit">
                                    </form>
                                </div>
                            </div>
                <script>
                    document.getElementById('hider{{ id }}').onclick = function () {
                        document.getElementById('popup{{ id }}').hidden = false;
                    }
                </script>
                <script>
                    document.getElementById('closer{{ id }}').onclick = function () {
                        document.getElementById('popup{{ id }}').hidden = true;
                    }
                </script>
                {% endfor %}
            </div>
            </div>
        </div>
    </div>

{% endblock %}